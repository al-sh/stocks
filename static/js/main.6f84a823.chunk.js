(this["webpackJsonpinvest-helper5"]=this["webpackJsonpinvest-helper5"]||[]).push([[0],{15:function(e,t,n){e.exports=n(29)},21:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),s=n(7),i=n(0),o=n.n(i),c=n(8),l=n.n(c),u=(n(21),n(1)),p=n(2),d=n(4),h=n(3),m=n(5);n(28);function f(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return n;return-1}function g(e,t){var n=f(e,t);e.splice(n,1)}function v(e){for(var t=0,n=0;n<e.length;n++)parseInt(e[n].id)>t&&(t=e[n].id);return t+1}function b(e,t,n){var a=e.length,r=(t+1)*n;r>a&&(r=a);for(var s=[],i=t*n;i<r;i++)s.push(e[i]);return s}function E(e,t){var n=function(e,t,n){return"float"===n.type?function(e,t,n,a){var r=isFinite(parseFloat(e[n]))?parseFloat(e[n]):0,s=isFinite(parseFloat(t[n]))?parseFloat(t[n]):0;return r>s?a?1:-1:r<s?a?-1:1:0}(e,t,n.field,n.ascOrder):"default"===n.type?function(e,t,n,a){return e[n]>t[n]?a?1:-1:e[n]<t[n]?a?-1:1:0}(e,t,n.field,n.ascOrder):void 0};return e.sort((function(e,a){for(var r,s=0;s<t.length;s++){r=t[s];var i=n(e,a,r);if(0!==i)return i}return 0}))}function O(e){if(!isFinite(e))return"";var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g," "),t[1]=t[1]?t[1].substring(0,2):"00",t.join(".")}function y(e){return w.apply(this,arguments)}function w(){return(w=Object(s.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return console.log("\u041e\u0448\u0438\u0431\u043a\u0430 HTTP: "+n.status),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=Object(m.b)((function(e){return{currentPortfolioValue:e.analytics.currentPortfolioValue,discountRate:e.analytics.discountRate,NPV:e.analytics.NPV,irr:e.analytics.irr}}),(function(e){return{dispatch:function(t){e(t)}}}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).close=function(){e.props.dispatch({type:"ANALYTICS.TOGGLE",show:!1})},e.onChangeCurrentPortfolioValue=function(t){e.props.dispatch({type:"ANALYTICS.TRANSFERS",currentPortfolioValue:t.target.value})},e.onChangeDiscountRate=function(t){console.log(t.target.value),e.props.dispatch({type:"ANALYTICS.TRANSFERS",discountRate:t.target.value})},e}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"Analytics"},o.a.createElement("button",{onClick:this.close,className:"toolbarButton",style:{float:"right",height:"25px",width:"25px"}},"X"),o.a.createElement("div",null,o.a.createElement("span",{className:"Analytics__Label"},"\u0421\u0442\u0430\u0432\u043a\u0430 \u0434\u0438\u0441\u043a\u043e\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f:"),o.a.createElement("input",{id:"discountRateInput",onChange:this.onChangeDiscountRate,type:"text",defaultValue:this.props.discountRate})),o.a.createElement("div",null,o.a.createElement("span",{className:"Analytics__Label"},"NPV:"),o.a.createElement("span",null,this.props.NPV)),o.a.createElement("div",null,o.a.createElement("span",{className:"Analytics__Label"},"\u041e\u0446\u0435\u043d\u043a\u0430 \u0430\u043a\u0442\u0438\u0432\u043e\u0432:"),o.a.createElement("input",{id:"portfolioValueInput",onChange:this.onChangeCurrentPortfolioValue,type:"text",defaultValue:this.props.currentPortfolioValue})),o.a.createElement("div",null,o.a.createElement("span",{className:"Analytics__Label"},"\u0414\u043e\u0445\u043e\u0434\u043d\u043e\u0441\u0442\u044c:"),o.a.createElement("span",null,O(100*this.props.irr)))))}}]),n}(o.a.Component)),I=[{id:1,name:"\u041e\u0442\u043a\u0440\u044b\u0442\u0438\u0435 \u0411\u0440\u043e\u043a\u0435\u0440",isActive:!0,amount:100500},{id:2,name:"\u0424\u0438\u043d\u0430\u043c",isActive:!0,amount:35e3},{id:3,name:"\u0422\u0438\u043d\u044c\u043a\u043e\u0444\u0444 \u0418\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438",isActive:!0,amount:12e4},{id:4,name:"\u0421\u0431\u0435\u0440\u0431\u0430\u043d\u043a",isActive:!0,amount:17e3},{id:5,name:"\u0412\u0422\u0411 \u041a\u0430\u043f\u0438\u0442\u0430\u043b",isActive:!0,amount:17e3},{id:6,name:"\u0411\u041a\u0421 \u0411\u0440\u043e\u043a\u0435\u0440",isActive:!1,amount:void 0},{id:7,name:"\u0418\u041a \u0424\u0440\u0438\u0434\u043e\u043c \u0424\u0438\u043d\u0430\u043d\u0441",isActive:!0,amount:17e3},{id:8,name:"Fidelity",isActive:!0,amount:17e3},{id:9,name:"Interactive brokers",isActive:!0,amount:8e5},{id:10,name:"TD Ameritrade",isActive:!1}],k=[{id:1,currencyId:1,dt:"2018-08-20T14:00:00.000Z",amount:6e4,Portfolio:I[0]},{id:2,currencyId:1,dt:"2018-08-27T14:00:00.000Z",amount:19e4,Portfolio:I[0]},{id:3,currencyId:1,dt:"2018-12-03T14:00:00.000Z",amount:5e4,Portfolio:I[0]},{id:4,currencyId:1,dt:"2018-12-10T14:00:00.000Z",amount:5e4,Portfolio:I[0]}];I[0].Transfers=k;var T="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0411\u0414, \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u044b \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435";function j(e,t){e({type:"TOGGLE_THROBBER",showThrobber:t})}var S={portfolios:{backUrl:"/getportfolios",testItems:I,actionType:"SWITCH.PORTFOLIOS"},transfers:{backUrl:"/transfers.getall",testItems:k,actionType:"SWITCH.TRANSFERS"}};function x(e,t){return A.apply(this,arguments)}function A(){return(A=Object(s.a)(r.a.mark((function e(t,n){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(n,!0),a=S[t],e.next=4,y(a.backUrl);case 4:(s=e.sent)||(console.warn(T),s=a.testItems),console.log(s),n({type:a.actionType,items:s}),j(n,!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=Object(m.b)((function(e){return{currentSection:e.currentSection}}),null)(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).testDataWarnText="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0411\u0414, \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u044b \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435",e.switchToTransfers=function(){var t=Object(s.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x("transfers",e.props.dispatch);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.switchToPortfolios=function(){var t=Object(s.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x("portfolios",e.props.dispatch);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"MainMenu"},o.a.createElement("span",{onClick:this.switchToTransfers,className:"transfers"===this.props.currentSection?"MainMenu__Item MainMenu__Item-active":"MainMenu__Item"},"\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f"),o.a.createElement("span",{onClick:this.switchToPortfolios,className:"portfolios"===this.props.currentSection?"MainMenu__Item MainMenu__Item-active":"MainMenu__Item"},"\u041f\u043e\u0440\u0442\u0444\u0435\u043b\u0438"))}}]),n}(o.a.Component)),_=Object(m.b)((function(e){return{currentSection:e.currentSection,settings:e.settings}}),(function(e){return{dispatch:function(t){e(t)}}}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).deleteSelectedItems=function(){e.props.dispatch({type:"DELETE_SELECTED_ITEMS"})},e.showItemBlock=function(){e.props.dispatch({type:"TOGGLE_ITEM_BLOCK",showAddEditBlock:!0})},e.showDisplaySettings=function(){e.props.dispatch({type:"DISPLAYSETTINGS.TOGGLE",showDisplaySettings:!0})},e.showTransfersAnalytics=function(){e.props.dispatch({type:"ANALYTICS.TRANSFERS",showDisplaySettings:!0,discountRate:6})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=[];return this.props.settings.withCheckBoxes&&e.push(o.a.createElement("button",{key:"btnDel",onClick:this.deleteSelectedItems,className:"toolbarButton"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),e.push(o.a.createElement("button",{key:"btnSettings",onClick:this.showDisplaySettings,className:"toolbarButton"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430")),"transfers"===this.props.currentSection&&e.push(o.a.createElement("button",{key:"transfers_Analytics",onClick:this.showTransfersAnalytics,className:"toolbarButton"},"\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430")),o.a.createElement("div",{className:"ToolbarTop"},e)}}]),n}(o.a.Component)),N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onChangeCheckBox=function(){e.props.dispatch({type:"TOGGLE_SELECT_ROW",item:e.props.item})},e.rowClick=function(t){"rowCheck"!==t.target.name&&(t.shiftKey?e.props.dispatch({type:"SHIFT_CLICK",rowId:e.props.item.id}):e.props.dispatch({type:"TOGGLE_ROW_TOOLBAR",rowId:e.props.item.id}))},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.item,t=this.props.columns.filter((function(e){return e.visible})),n=[];this.props.withCheckBoxes&&n.push(o.a.createElement("td",{key:"td_checkBox_itemId_"+e.id},o.a.createElement("input",{type:"checkbox",name:"rowCheck",onChange:this.onChangeCheckBox,checked:this.props.selected})));for(var a=0;a<t.length;a++){var r="";t[a].format?r=t[a].format(e[t[a].field]):e[t[a].field]&&(r=e[t[a].field].toString()),n.push(o.a.createElement("td",{key:"td_itemId_"+e.id+"_col_"+a,style:t[a].style},r))}return o.a.createElement("tr",{key:e.id,className:this.props.selected?"rowSel":"",onClick:this.rowClick},n)}}]),n}(o.a.Component),B=Object(m.b)((function(e){return{columns:e.columns,items:e.items,withCheckBoxes:e.settings.withCheckBoxes,shiftClickItemId:e.settings.shiftClickItemId}}))(N),R=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).delete=function(t){e.props.dispatch({type:"ITEM.DELETE",itemId:e.props.item.id})},e.edit=function(t){e.props.dispatch({type:"TOGGLE_ITEM_BLOCK",showAddEditBlock:!0,editItem:e.props.item})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"TOGGLE_ITEM_BLOCK",showAddEditBlock:!1})}},{key:"render",value:function(){return o.a.createElement("tr",null,o.a.createElement("td",{colSpan:this.props.columns.filter((function(e){return e.visible})).length},o.a.createElement("button",{onClick:this.delete,className:"toolbarButton"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),o.a.createElement("button",{onClick:this.edit,className:"toolbarButton"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))}}]),n}(o.a.Component),L=Object(m.b)((function(e){return{columns:e.columns}}),null)(R),G=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.data;return o.a.createElement(o.a.Fragment,null,o.a.createElement(B,{key:e.id,item:e,selected:this.props.selected}),this.props.needShowToolbar?o.a.createElement(L,{item:e}):null)}}]),n}(o.a.Component),D=Object(m.b)(null)(G),M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){for(var e=b(this.props.items,this.props.activePage,this.props.rowsinPage),t=[],n=0;n<e.length;n++){var a=!!~this.props.selectedItems.indexOf(e[n].id),r=this.props.toolBarRowId===e[n].id;t.push(o.a.createElement(D,{key:"scrollerRow_"+n,data:e[n],selected:a,needShowToolbar:r}))}return o.a.createElement("tbody",null,t)}}]),n}(o.a.Component),V=Object(m.b)((function(e){return{items:e.items,activePage:e.settings.activePage,rowsinPage:e.settings.rowsinPage,toolBarRowId:e.settings.toolBarRowId,selectedItems:e.selectedItems}}))(M),F=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).goToPage=function(t){e.props.dispatch({type:"GO_TO_PAGE",page:e.props.data.pageNum})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.data;return o.a.createElement("span",{onClick:this.goToPage,className:this.props.isActive?"activePage":""},e.pageNum+1)}}]),n}(o.a.Component),W=Object(m.b)(null,null)(F),H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("span",{className:"pagerFiller"},"...")}}]),n}(o.a.Component),Y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.rowsinPage,t=this.props.rowsCount,n=this.props.activePage,a=[],r=(t-t%e)/e;t%e>0&&(r+=1);for(var s=0;s<r;s++){var i={};i.pageNum=s;var c=o.a.createElement(W,{key:"pg"+i.pageNum,data:i,isActive:n===s});r>10?(0===s&&s<n-2&&(a.push(c),n-2!==1&&a.push(o.a.createElement(H,{key:"filler"+i.pageNum}))),s>=n-2&&s<=n+2&&a.push(c),s===r-1&&s>n+2&&(n+2!==r-2&&a.push(o.a.createElement(H,{key:"filler"+i.pageNum})),a.push(c))):a.push(c)}return o.a.createElement("div",{className:"pageBlock"},a)}}]),n}(o.a.Component),K=Object(m.b)((function(e){return{activePage:e.settings.activePage,rowsinPage:e.settings.rowsinPage,rowsCount:e.items.length}}))(Y),U=Object(m.b)((function(e){return{currentSection:e.currentSection}}),(function(e){return{toggleSortParams:function(t,n,a){e(function(e,t,n){return{type:"SORT.TOGGLE",field:e,sortType:t,ctrlPressed:n}}(t,n,a))}}}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).sort=function(t){var n=e.props.type?e.props.type:"default",a=e.props.field,r=t.ctrlKey;e.props.toggleSortParams(a,n,r)},e}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("td",{className:this.props.headerClassName,style:this.props.headerStyle},o.a.createElement("span",{className:"sortHeader",onClick:this.sort},this.props.text),o.a.createElement("span",{className:this.props.sortOrderClassName}),o.a.createElement("span",{className:"sortNumber"},this.props.sortIndex))}}]),n}(o.a.Component)),X=Object(m.b)((function(e){return{columns:e.columns,items:e.items,page:e.settings.activePage,withCheckBoxes:e.settings.withCheckBoxes,rowsinPage:e.settings.rowsinPage,selectedItems:e.selectedItems,sortParams:e.sortParams}}),(function(e){return{dispatch:function(t){e(t)}}}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).onChangeCheckBox=function(t){e.props.dispatch({type:"TOGGLE_ACTIVE_PAGE_ROW_SELECTION",selected:t.target.checked})},e.isAllRowsSelectedInPage=function(){for(var t=b(e.props.items,e.props.page,e.props.rowsinPage),n=!0,a=0;a<t.length;a++)-1===e.props.selectedItems.indexOf(t[a].id)&&(n=!1);return 0===t.length&&(n=!1),n},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.sortParams,t=this.props.columns.filter((function(e){return e.visible})),n=[],a=[];this.props.withCheckBoxes&&(n.push(o.a.createElement("col",{key:"col_cb",width:"50"})),a.push(o.a.createElement("td",{key:"headItem_cb"},o.a.createElement("input",{type:"checkbox",name:"rowCheck",onChange:this.onChangeCheckBox,checked:this.isAllRowsSelectedInPage()}))));for(var r=0;r<t.length;r++){var s=void 0,i=void 0;if(e.length>0)for(var c=0;c<e.length;c++)e[c].field===t[r].field&&(s=c+1,i=e[c].ascOrder?"sortArrowUp":"sortArrowDown");n.push(o.a.createElement("col",{key:"col_"+r,width:t[r].width})),a.push(o.a.createElement(U,{key:"headItem_"+r,field:t[r].field,type:t[r].type,visible:t[r].visible,headerClassName:t[r].headerClassName,headerStyle:t[r].headerStyle,text:t[r].text,sortIndex:s,sortOrderClassName:i}))}return o.a.createElement(o.a.Fragment,null,o.a.createElement("colgroup",null,n),o.a.createElement("thead",null,o.a.createElement("tr",null,a)))}}]),n}(o.a.Component)),Z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={id:e.props.editItem?e.props.editItem.id:0,name:e.props.editItem?e.props.editItem.name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",isActive:!!e.props.editItem&&e.props.editItem.isActive},e.save=function(t){var n={};n.id=e.state.id,n.name=e.state.name,n.isActive=e.state.isActive,console.log(n),e.props.editItem?e.props.dispatch({type:"ITEM.EDIT",item:n}):(n.id=v(e.props.items),e.props.dispatch({type:"ITEM.ADD",item:n}))},e.close=function(t){e.props.dispatch({type:"TOGGLE_ITEM_BLOCK",showAddEditBlock:!1})},e.onNameChange=function(t){e.setState({name:t.target.value})},e.onStatusChange=function(t){console.log(t.target.value),e.setState({isActive:t.target.checked})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"TOGGLE_ROW_TOOLBAR",rowId:null})}},{key:"render",value:function(){var e={};return this.props.editItem?e=this.props.editItem:(e.name="\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u04351",e.isActive=!1),o.a.createElement("div",{className:"itemBlock"},o.a.createElement("button",{onClick:this.close,className:"toolbarButton",style:{float:"right",height:"25px",width:"25px"}},"X"),o.a.createElement("div",null,o.a.createElement("span",{className:"itemBlock__label"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:"),o.a.createElement("input",{id:"fio",onChange:this.onNameChange,type:"text",defaultValue:e.name})),o.a.createElement("div",null,o.a.createElement("span",{className:"itemBlock__label"},"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439"),o.a.createElement("input",{id:"status",onChange:this.onStatusChange,type:"checkbox",defaultChecked:e.isActive})),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.save,className:"toolbarButton",style:{marginTop:"25px"}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}]),n}(o.a.Component),J=Object(m.b)((function(e){return{items:e.items,editItem:e.settings.editItem}}))(Z),$=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={columns:e.props.columns,rowsinPage:e.props.rowsinPage,withCheckBoxes:e.props.withCheckBoxes},e.save=function(t){e.props.dispatch({type:"DISPLAYSETTINGS.SAVE",columns:e.state.columns,rowsinPage:e.state.rowsinPage,withCheckBoxes:e.state.withCheckBoxes})},e.close=function(t){e.props.dispatch({type:"DISPLAYSETTINGS.TOGGLE",showDisplaySettings:!1})},e.onVisibleChange=function(t){var n=Object.assign([],e.state.columns);n[t.target.getAttribute("colnumber")].visible=t.target.checked,e.setState({columns:n})},e.onNeedCheckBoxesChange=function(t){e.setState({withCheckBoxes:t.target.checked})},e.onRowsPerPageChange=function(t){var n=parseInt(t.target.value),a=parseInt(t.target.getAttribute("max"));n>a&&(t.target.value=a),e.setState({rowsinPage:n})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"TOGGLE_ROW_TOOLBAR",rowId:null})}},{key:"render",value:function(){for(var e=this.props.columns,t=[],n=0;n<e.length;n++)t.push(o.a.createElement("div",{key:"columnSettings_"+n},o.a.createElement("label",{htmlFor:"columnSettingsInp_"+n},e[n].text),o.a.createElement("input",{id:"columnSettingsInp_"+n,colnumber:n,field:e[n].field,onChange:this.onVisibleChange,type:"checkbox",defaultChecked:e[n].visible})));return o.a.createElement("div",{className:"itemBlock"},o.a.createElement("button",{onClick:this.close,className:"toolbarButton",style:{float:"right",height:"25px",width:"25px"}},"X"),o.a.createElement("div",null,"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u0435\u0439"),t,o.a.createElement("div",null,o.a.createElement("span",null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435:"),o.a.createElement("input",{type:"number",min:1,max:100,name:"rowsPerPage",onChange:this.onRowsPerPageChange,defaultValue:this.props.rowsinPage,style:{marginLeft:"10px",width:"50px"}})),o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"inp_needCheckBoxes"},"\u0427\u0435\u043a\u0431\u043e\u043a\u0441\u044b"),o.a.createElement("input",{id:"inp_needCheckBoxes",type:"checkbox",onChange:this.onNeedCheckBoxesChange,defaultChecked:this.props.withCheckBoxes})),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.save,className:"toolbarButton",style:{marginTop:"25px"}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}}]),n}(o.a.Component),q=Object(m.b)((function(e){return{columns:e.columns,rowsinPage:e.settings.rowsinPage,withCheckBoxes:e.settings.withCheckBoxes}}))($),z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"inline-block",position:"relative"}},this.props.showAddEditBlock?o.a.createElement(J,null):null,this.props.showDisplaySettings?o.a.createElement(q,null):null,o.a.createElement("div",{className:"rScroller"},o.a.createElement("div",{className:"rScrollerHeader"},o.a.createElement(_,null)),o.a.createElement("table",{cellSpacing:"0"},o.a.createElement(X,null),o.a.createElement(V,null)),o.a.createElement(K,null)))}}]),n}(o.a.Component),Q=Object(m.b)((function(e){return{showAddEditBlock:e.settings.showAddEditBlock,showDisplaySettings:e.settings.showDisplaySettings}}),null)(z),ee=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"Throbber"})}}]),n}(o.a.Component),te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(P,null),this.props.showThrobber?o.a.createElement(ee,null):o.a.createElement(Q,null),this.props.showAnalytics?o.a.createElement(C,null):null)}}]),n}(o.a.Component),ne=Object(m.b)((function(e){return{showThrobber:e.showThrobber,showAnalytics:e.analytics.show}}),null)(te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=n(9),re={analytics:{currentPortfolioValue:4e5,discountRate:6,NPV:0,irr:0},currentSection:"portfolios",columns:[{width:"200px",field:"name",text:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",visible:!0},{width:"160px",field:"isActive",text:"\u0421\u0442\u0430\u0442\u0443\u0441",format:function(e){return e?"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439":"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439"},visible:!0},{width:"150px",field:"amount",text:"\u0421\u0443\u043c\u043c\u0430",type:"float",headerClassName:"header-amount",style:{textAlign:"right",paddingRight:"15px"},format:O,visible:!0}],items:I,selectedItems:[],settings:{rowsinPage:5,activePage:0,withCheckBoxes:!1,showDisplaySettings:!1,showAddEditBlock:!1,editItem:null,shiftClickItemId:null,toolBarRowId:null},showThrobber:!1,sortParams:[{field:"name",type:"default",ascOrder:!0}]},se={toggle:function(e,t){var n=Object.assign({},e);return n.analytics.show=t.show,n},transfers:function(e,t){var n=t.discountRate?t.discountRate:e.analytics.discountRate,a=t.currentPortfolioValue?t.currentPortfolioValue:e.analytics.currentPortfolioValue;var r=Object.assign({},e);if("transfers"!==r.currentSection)return console.warn("\u0410\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0430 \u043f\u043e\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439"),r;r.analytics.show=!0;var s=[{width:"100px",field:"dt",text:"\u0414\u0430\u0442\u0430",format:function(e){return new Date(e).toLocaleDateString()},visible:!0},{width:"200px",field:"Portfolio",text:"\u041f\u043e\u0440\u0442\u0444\u0435\u043b\u044c",format:function(e){return e.name},visible:!0},{width:"120px",field:"Portfolio",text:"\u0421\u0442\u0430\u0442\u0443\u0441",format:function(e){return e.isActive?"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439":"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439"},visible:!0},{width:"150px",field:"amount",text:"\u0421\u0443\u043c\u043c\u0430",type:"float",headerClassName:"header-amount",style:{textAlign:"right",paddingRight:"15px"},format:O,visible:!0},{width:"140px",field:"daysCount",text:"\u041a\u043e\u043b-\u0432\u043e \u0434\u043d\u0435\u0439",type:"float",headerClassName:"header-amount",style:{textAlign:"right",paddingRight:"15px"},format:O,visible:!0},{width:"120px",field:"amountDisc",text:"\u041f\u043e\u0434 "+n+" %",type:"float",headerClassName:"header-amount",style:{textAlign:"right",paddingRight:"15px"},format:O,visible:!0}];r.columns=s,function(e){for(var t=0;t<e.length;t++){var a=e[t],r=new Date(a.dt),s=new Date;a.daysCount=(s-r)/864e5,a.durationCoef=a.daysCount/366,a.amountDisc=a.amount*(1+n/100*a.durationCoef)}}(r.items),r.analytics.NPV=O(r.items.reduce((function(e,t){return e+t.amountDisc}),0)),r.analytics.amountAll=r.items.reduce((function(e,t){return e+t.amount}),0);var i=r.items.reduce((function(e,t){return e+t.amount*t.durationCoef}),0);return r.analytics.irr=(a-r.analytics.amountAll)/i,r.settings.activePage=0,r}},ie={add:function(e,t){var n=Object.assign({},e),a=Object.assign([],n.items);return a.push(t.item),E(a,n.sortParams),n.items=a,n.settings.showAddEditBlock=!1,n},edit:function(e,t){var n=Object.assign({},e),a=Object.assign([],n.items);return g(a,t.item.id),a.push(t.item),E(a,n.sortParams),n.items=a,n.settings.showAddEditBlock=!1,n},delete:function(e,t){var n=Object.assign({},e),a=Object.assign([],n.items);return g(a,t.itemId),n.selectedItems=[],n.items=a,n}},oe={toggle:function(e,t){var n={field:t.field,type:t.sortType,ascOrder:!0},a=Object.assign({},e),r=Object.assign([],a.sortParams);if(r.length>0&&r[0].field===n.field&&(n.ascOrder=!r[0].ascOrder),t.ctrlPressed){for(var s=!1,i=0;i<r.length;i++)r[i].field===n.field&&(n.ascOrder=!r[i].ascOrder,r[i]=n,s=!0);s||r.push(n)}else(r=[]).push(n);var o=Object.assign([],a.items);return E(o,r),a.items=o,a.sortParams=r,a},run:function(e,t){var n=Object.assign({},e),a=Object.assign([],n.items);return E(a,n.sortParams),n.items=a,n}},ce={toggle:function(e,t){var n=Object.assign({},e);return n.settings.showDisplaySettings=t.showDisplaySettings,n},save:function(e,t){var n=Object.assign({},e);return n.columns=t.columns,n.settings.rowsinPage=t.rowsinPage,n.settings.withCheckBoxes=t.withCheckBoxes,n.settings.showDisplaySettings=!1,n.settings.activePage=0,n}},le={transfers:function(e,t){var n=Object.assign({},e);n.currentSection="transfers";var a=[{width:"100px",field:"dt",text:"\u0414\u0430\u0442\u0430",format:function(e){return new Date(e).toLocaleDateString()},visible:!0},{width:"200px",field:"Portfolio",text:"\u041f\u043e\u0440\u0442\u0444\u0435\u043b\u044c",format:function(e){return e.name},visible:!0},{width:"150px",field:"Portfolio",text:"\u0421\u0442\u0430\u0442\u0443\u0441",format:function(e){return e.isActive?"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439":"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439"},visible:!0},{width:"150px",field:"amount",text:"\u0421\u0443\u043c\u043c\u0430",type:"float",headerClassName:"header-amount",style:{textAlign:"right",paddingRight:"15px"},format:O,visible:!0}];return n.columns=a,n.items=t.items,n.page=0,n},portfolios:function(e,t){var n=Object.assign({},e);n.currentSection="portfolios";var a=[{width:"250px",field:"name",text:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",visible:!0},{width:"160px",field:"isActive",text:"\u0421\u0442\u0430\u0442\u0443\u0441",format:function(e){return e?"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439":"\u041d\u0435 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439"},visible:!0},{width:"150px",field:"Transfers",text:"\u0421\u0443\u043c\u043c\u0430",type:"float",style:{textAlign:"right",paddingRight:"15px"},format:function(e){if(e)return O(e.reduce((function(e,t){return e+t.amount}),0))},visible:!0}];return n.columns=a,n.items=t.items,n.page=0,n}},ue=function(e,t){var n=Object.assign({},e);return n.settings.activePage=t.page,n},pe=function(e,t){var n=Object.assign({},e);return n.items=t.items,E(n.items,n.sortParams),n},de=function(e,t){var n=Object.assign({},e);return n.settings.showAddEditBlock=t.showAddEditBlock,t.editItem?n.settings.editItem=t.editItem:n.settings.editItem=null,n},he=function(e,t){var n=t.item.id,a=Object.assign({},e),r=Object.assign([],a.selectedItems);return~r.indexOf(n)?r.splice(r.indexOf(n),1):r.push(n),a.selectedItems=r,a.showAddEditBlock=!1,a},me=function(e,t){var n=Object.assign({},e);return n.showThrobber=t.showThrobber,n},fe=function(e,t){for(var n=Object.assign({},e),a=Object.assign([],n.items),r=Object.assign([],n.selectedItems),s=0;s<r.length;s++)g(a,r[s]);return n.selectedItems=[],n.items=a,n},ge=function(e,t){var n=Object.assign({},e),a=Object.assign([],n.selectedItems);if(t.selected){a=[];for(var r=b(n.items,n.page,n.rowsinPage),s=0;s<r.length;s++)a.push(r[s].id)}else a=[];return n.selectedItems=a,n.showAddEditBlock=!1,n},ve=function(e,t){var n=Object.assign({},e);return n.settings.toolBarRowId===t.rowId?n.settings.toolBarRowId=null:n.settings.toolBarRowId=t.rowId,n},be=function(e,t){var n=Object.assign({},e),a=Object.assign([],n.selectedItems);if(n.settings.toolBarRowId=null,n.settings.showAddEditBlock=!1,n.settings.shiftClickItemId){var r=f(n.items,n.settings.shiftClickItemId),s=f(n.items,t.rowId);if(r>s){var i=r;r=s,s=i}a=[];for(var o=r;o<=s;o++)a.push(n.items[o].id);n.settings.shiftClickItemId=n.items[s].id}else n.settings.shiftClickItemId=t.rowId,a.push(t.rowId);return n.selectedItems=a,n},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ANALYTICS.TOGGLE":return se.toggle(e,t);case"ANALYTICS.TRANSFERS":return se.transfers(e,t);case"ITEM.ADD":return ie.add(e,t);case"ITEM.DELETE":return ie.delete(e,t);case"ITEM.EDIT":return ie.edit(e,t);case"ITEMS.UPDATE":return pe(e,t);case"DISPLAYSETTINGS.TOGGLE":return ce.toggle(e,t);case"DISPLAYSETTINGS.SAVE":return ce.save(e,t);case"SORT.RUN":return oe.run(e,t);case"SORT.TOGGLE":return oe.toggle(e,t);case"SWITCH.TRANSFERS":return le.transfers(e,t);case"SWITCH.PORTFOLIOS":return le.portfolios(e,t);case"DELETE_SELECTED_ITEMS":return fe(e);case"GO_TO_PAGE":return ue(e,t);case"TOGGLE_ACTIVE_PAGE_ROW_SELECTION":return ge(e,t);case"TOGGLE_ITEM_BLOCK":return de(e,t);case"TOGGLE_ROW_TOOLBAR":return ve(e,t);case"TOGGLE_SELECT_ROW":return he(e,t);case"TOGGLE_THROBBER":return me(e,t);case"SHIFT_CLICK":return be(e,t);default:return e}};(function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null,console.warn("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0411\u0414, \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u044b \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435."),E(re.items,re.sortParams),e.abrupt("return",re);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){var t=e,n=Object(ae.b)(Ee,t,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(o.a.createElement(m.a,{store:n},o.a.createElement(ne,null)),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.6f84a823.chunk.js.map